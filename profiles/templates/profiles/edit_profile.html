{% extends "base.html" %}
{% load static %}
{% block content %}
    <div class="profile-container">
        <div class="profile-info">
            <div class="avatar-container edit-page">
                {% if user.profile.avatar %}
                    <img src="{{ user.profile.avatar.url }}" alt="avatar" class="avatar">
                {% else %}
                    <img src="{% static 'images/default_avatar.svg' %}" alt="avatar" class="avatar">
                {% endif %}
                <div class="avatar-buttons">
                    <button class="edit-avatar-btn" id="edit-avatar-btn">Edit</button>
                    <button class="reset-avatar-btn" id="reset-avatar-btn">Reset</button>
                </div>
            </div>

        </div>
        <div class="profile-bio">
            <form class="edit-bio">
                {% csrf_token %}
                {{ profile_form }}
            </form>
        </div>
    </div>

    {{ password_form }}

    <script>
        $(document).ready(function() {
            // need to fetch all the countries from api and populate the select box with id=id_country
            $.ajax({
                url: 'https://raw.githubusercontent.com/dr5hn/countries-states-cities-database/master/countries%2Bcities.json',
                type: 'GET',
                success: function(data) {
                    var countries = data;
                    var select = document.getElementById('id_country');
                    for (var i = 0; i < countries.length; i++) {
                        var option = document.createElement('option');
                        option.value = countries[i].name;
                        option.innerHTML = countries[i].name;
                        select.appendChild(option);
                    }
                }
            })
        })
    </script>
{% endblock %}